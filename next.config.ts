import fs from 'fs';
import type { NextConfig } from 'next';

// @ts-check

const packageJson = JSON.parse(fs.readFileSync(new URL("./package.json", import.meta.url), "utf8"));

if (process.env.NODE_ENV === 'development' || process.env.NODE_ENV === 'production') {
    if (!process.env.__NEXT_MOTD_PRINTED) {
        console.log(`                                                                            +++++    ++              
                                                          ++++++++++++++    +++++    +++++           
                                             +++++++++++++++++++++++++++    +++++    +++++++         
                                     ++++     ++++++++++++++++++++++++++     ++++    +++++++++       
                              +++    ++++     +++++++++++++++++++++++++++    ++++    ++++++++++      
                            +++++    +++++    +++++++++++++++++++++++++++            ++++++++++      
                           ++++++    +++++    +++++++++++++++++++++++++++++        ++++++++++++      
                          +++++++      ++     ++++++++++++++++++++++++++++++++++++++++++++++++++     
                         +++++++++           +++++++++++++++++++++++++++++++++++++++++++++++++++     
                         +++++++++++       +++++++++++++++++++++++++++++++++++++++++++++++++++++     
                         +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++     
                         ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++    
                         +++++++++++++++++++++++++++++++++++++++++++++++++              +++++++++    
                          ++++++++++++++++++++++++++++++++++                            +++++++++    
                          +++++++++++++++++++                                           +++++++++    
                          +++++++++                                                     ++++++++++   
                          +++++++++                                                      +++++++++   
                           +++++++++                                   +++++++++         +++++++++   
                                                          +++++++++    +++++++++         +++++++++   
                                                          +++++++++     +++++++++        ++++++++++  
                                                          ++++++++++    +++++++++         +++++++++  
                          ++++++++++++++++++++++           +++++++++    +++++++++         +++++++++  
                 +++++++++++++++++++++++++++++++++++       +++++++++                      +++++++++  
            ++++++++++++++++++++++++++++++++++++++++                                      +++++++++  
         +++++++++++++++++++++++++++++++++++++++++                       +++++++++         +++++++++ 
        ++++++++++++++++++++++++++++++++++++++              +++++++++    +++++++++         +++++++++ 
          +++++++++++++++++++++++++++++                     +++++++++    +++++++++         +++++++++ 
                                                   ++       +++++++++    ++++++++++        +++++++++ 
                                              +++++++       +++++++++     +++++++++        ++++++++++
                                       ++++++++++++++        +++++++++                      +++++++++
         +++++++++++++++++++++++++++++++++++++++++++++                                      +++++++++
         +++++++++++++++++++++++++++++++++++++++++++++                                      +++++++++
         +++++++++++++++++++++++++++++++++++++++++++++                                    +++++++++++
          ++++++++++++++++++++++++++++++++++++++++++++                           +++++++++++++++++++ 
          ++++++++++++++++++++++++++++++++++++++++++++            +++++++++++++++++++++++++++++++++  
          ++++++++++++++++++++++++++++++++++++++++++        ++++++++++++++++++++++++++++++++++++++   
          ++++++++++++++++++++++++++++++++++++               +++++++++++++++++++++++++++++++++++     
            ++++++++++++++++++++++++                         +++++++++++++++++++++++++++++++         
                                                     ++      ++++++++++++++++++                      
                                              +++++++++      ++++                                    
           +                        +++++++++++++++++++                                              
           +++++++++++++++++++++++++++++++++++++++++++++                                             
           +++++++++++++++++++++++++++++++++++++++++++++                                             
           +++++++++++++++++++++++++++++++++++++++++++++                                             
            +++++++++++++++++++++++++++++++++++++++++++                                              
            ++++++++++++++++++++++++++++++++++++++++                                                 
            +++++++++++++++++++++++++++++++++++                                                      
                +++++++++++++++++++++++                                                              


                                    Wigor Schedule Provisioning Server v${packageJson.version}

                                             Kaelian BAUDELET Â© 2025
        `);
        process.env.__NEXT_MOTD_PRINTED = 'true';
    }
}

const nextConfig: NextConfig = {
    output: "standalone",
    images: {
        dangerouslyAllowSVG: true,
    },
    devIndicators: { position: "bottom-left" },
    logging: {
        fetches: {
            fullUrl: true,
            hmrRefreshes: true,
        },
    },
    skipTrailingSlashRedirect: true,
    pageExtensions: ['js', 'jsx', 'md', 'mdx', 'ts', 'tsx'],
    reactStrictMode: true,
    serverExternalPackages: [],
};

export default nextConfig;